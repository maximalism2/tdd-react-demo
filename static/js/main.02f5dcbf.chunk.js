(this["webpackJsonptdd-react-demo"]=this["webpackJsonptdd-react-demo"]||[]).push([[0],{150:function(n,t,e){"use strict";e.r(t);var r=e(2),a=e.n(r),c=e(9),o=e(0),u=e.n(o),i=e(22),m=e.n(i),l=e(3),s=e(23),f=e(27),d=e(24),p=e(28),v=function(n){Object(d.a)(e,n);var t=Object(f.a)(e);function e(){return Object(s.a)(this,e),t.call(this,"Promise has been canceled")}return e}(Object(p.a)(Error));function b(){}var h=e(153),j=e(4),E=e(5);function O(){var n=Object(j.a)(["\n  color: #666;\n  font-size: 0.8rem;\n"]);return O=function(){return n},n}function g(){var n=Object(j.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return g=function(){return n},n}function w(){var n=Object(j.a)(["\n  font-weight: bold;\n"]);return w=function(){return n},n}function y(){var n=Object(j.a)(["\n  width: 2em;\n  height: 2em;\n  border-radius: 0.2rem;\n  margin-right: 0.5rem;\n"]);return y=function(){return n},n}function k(){var n=Object(j.a)(["\n  display: flex;\n  align-items: center;\n"]);return k=function(){return n},n}function x(){var n=Object(j.a)(["\n  border: 1px solid #ddd;\n  border-radius: 0.2rem;\n  max-width: 35rem;\n  margin: 0 auto 2rem;\n  padding: 1rem;\n"]);return x=function(){return n},n}var C=E.a.article(x());function I(n){var t=n.avatar,e=n.fullName;return u.a.createElement(S,null,u.a.createElement(D,{src:t}),u.a.createElement(M,null,e))}var S=E.a.div(k()),D=E.a.img(y()),M=E.a.span(w()),N=E.a.header(g()),z=E.a.span(O());function A(){var n=Object(j.a)(["\n  padding: 1em;\n"]);return A=function(){return n},n}function J(){var n=Object(j.a)(["\n  border-top: 1px solid #ddd;\n  font-size: 0.85rem;\n"]);return J=function(){return n},n}function P(n){var t=n.postId,e=n.totalComments,r=n.comments,i=Object(o.useState)([]),m=Object(l.a)(i,2),s=m[0],f=m[1];if(0===r.length)return null;function d(){return(d=Object(c.a)(a.a.mark((function n(){var e;return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,fetch("/posts/".concat(t,"/comments"));case 2:return e=n.sent,n.t0=f,n.next=6,e.json();case 6:n.t1=n.sent,(0,n.t0)(n.t1);case 8:case"end":return n.stop()}}),n)})))).apply(this,arguments)}var p=s.length>0,v=p?s:r;return u.a.createElement(R,null,v.map((function(n){return u.a.createElement(W,Object.assign({key:n.id},n))})),!p&&e>2&&u.a.createElement(B,{count:e-1,onClick:function(){return d.apply(this,arguments)}}))}function W(n){var t=n.author,e=n.content;return u.a.createElement(T,null,u.a.createElement(I,t),u.a.createElement("p",null,e))}function B(n){var t=n.count,e=n.onClick;return u.a.createElement("button",{type:"button",onClick:e},"Show ",t," more")}var R=E.a.section(J()),T=E.a.article(A());function q(n){var t=n.id,e=n.author,r=n.content,a=n.timestamp,c=n.totalComments,o=n.comments;return u.a.createElement(C,null,u.a.createElement(N,null,u.a.createElement(I,e),u.a.createElement(z,null,Object(h.a)(new Date(a),"yyyy-MM-dd"))),u.a.createElement("p",null,r),u.a.createElement(P,{comments:o,totalComments:c,postId:t}))}var F=function(){var n=Object(o.useState)([]),t=Object(l.a)(n,2),e=t[0],r=t[1];return Object(o.useEffect)((function(){var n=function(n){var t=!1,e=new v;return{promise:new Promise((function(r,a){n.then((function(n){return t?a(e):r(n)}),(function(n){return a(t?e:n)}))})),cancel:function(){t=!0}}}(fetch("/posts"));return n.promise.then((function(n){return n.json()})).then(r).catch(b),function(){return n.cancel()}}),[]),u.a.createElement("div",null,u.a.createElement("h1",null,"TDD in React is \ud83d\udd25"),e.map((function(n){return u.a.createElement(q,Object.assign({key:n.id},n))})))},G=(e(37),e(16)),H=e(17),K=e(29),L=e(8),Q=e(6),U=e.n(Q);function V(){return{avatar:U.a.image.avatar(),fullName:U.a.name.findName("","",void 0)}}function X(n,t){var e=U.a.random.number({min:n,max:t});return new Array(e).fill(null).map((function(){return{id:U.a.random.uuid(),author:V(),content:U.a.lorem.lines()}}))}var Y=function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:3;return new Array(n).fill(null).map((function(){return{id:U.a.random.uuid(),content:U.a.lorem.lines(),author:V(),timestamp:U.a.date.recent(),comments:X(0,5)}}))}(5),Z=Y.map((function(n){return Object(K.a)({},n,{totalComments:n.comments.length,comments:n.comments.slice(0,1)})}));var $=[L.b.get("/posts",(function(n,t,e){return t(e.json(Z))})),L.b.get("/posts/:postId/comments",(function(n,t,e){var r=function(n){var t=Y.find((function(t){return t.id===n}));return t?t.comments:null}(n.params.postId);return t(e.json(r))}))],_=H.a.apply(void 0,Object(G.a)($));Object(c.a)(a.a.mark((function n(){return a.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,_.start({serviceWorker:{url:"https://necinc.github.io/tdd-react-demo/mockServiceWorker.js",options:{scope:"https://necinc.github.io/tdd-react-demo/"}}});case 2:m.a.render(u.a.createElement(u.a.StrictMode,null,u.a.createElement(F,null)),document.getElementById("root"));case 3:case"end":return n.stop()}}),n)})))()},31:function(n,t,e){n.exports=e(150)},37:function(n,t,e){}},[[31,1,2]]]);
//# sourceMappingURL=main.02f5dcbf.chunk.js.map